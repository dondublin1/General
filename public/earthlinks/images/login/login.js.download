var curDateTime=new Date();var tzoffset=-(curDateTime.getTimezoneOffset()/60);var capsLockOnMsg="Warning!<br />Caps Lock is On.";var maxLengthOver="Maximum allowed length exceeded";var invalidCharacter="Invalid Character detected";var validUnameList=/[0-9a-zA-Z\.\-\_\@]/;var validAlphaNumList=/[0-9a-zA-Z]/;function getit(id){return document.getElementById(id)}function warnMessage(msg,element){getit(element).innerHTML=msg;getit(element).style.visibility="visible"}function clearWarn(element){getit(element).innerHTML="";getit(element).style.visibility="hidden"}function checkCapsLock(e,element){var myKeyCode=0;var myShiftKey=false;if(document.all){myKeyCode=e.keyCode;myShiftKey=e.shiftKey}else{if(document.layers){myKeyCode=e.which;myShiftKey=(myKeyCode==16)?true:false}else{if(document.getElementById){myKeyCode=e.which;myShiftKey=e.shiftKey}}}if((myKeyCode>=65&&myKeyCode<=90)&&!myShiftKey){warnMessage(capsLockOnMsg,element);return true}else{if((myKeyCode>=97&&myKeyCode<=122)&&myShiftKey){warnMessage(capsLockOnMsg,element);return true}else{clearWarn(element);return false}}}function checkInvalidChar(login,element){var len=login.length;if(element=="emailElement"){for(var i=0;i<len;i++){var currChar=login.charAt(i);if(!validUnameList.test(currChar)){warnMessage(invalidCharacter,element);return true}if((i==0)&&!validAlphaNumList.test(currChar)){warnMessage(invalidCharacter,element);return true}if((currChar=="@")&&!validAlphaNumList.test(login.charAt(i-1))){warnMessage(invalidCharacter,element);return true}if((currChar=="@")&&(login.indexOf("@")>32)){warnMessage(maxLengthOver,element);return true}}}else{if(element=="passwordElement"){for(var i=0;i<len;i++){var currChar=login.charAt(i);if(!validAlphaNumList.test(currChar)){warnMessage(invalidCharacter,element);return true}if(login.length>8){warnMessage(maxLengthOver,element);return true}}}}}function hideInlineError(element){errorElement=getit(element);errorElement.style.visibility="hidden"}function loadFocus(){if(GetCookie("ZU")!=""&&GetCookie("ZU")!=null){document.signinFrm.password.focus()}else{document.signinFrm.email.focus()}}function getCookieVal(offset){var endstr=document.cookie.indexOf(";",offset);if(endstr==-1){endstr=document.cookie.length}return unescape(document.cookie.substring(offset,endstr))}function GetCookie(name){var arg=name+"=";var alen=arg.length;var clen=document.cookie.length;var i=0;while(i<clen){var j=i+alen;if(document.cookie.substring(i,j)==arg){return getCookieVal(j)}i=document.cookie.indexOf(" ",i)+1;if(i==0){break}}return""}function DeleteCookie(name){var exp=new Date();exp.setTime(exp.getTime()-1);var cval=GetCookie(name);document.cookie=name+"="+cval+"; expires="+exp.toGMTString()}function frameBreakout(){if(top.location!=location){top.location.reload()}}var loggingIn=false;function checkLogin(){if(loggingIn){return false}else{return mapDomain()}}function mapDomain(){var email=document.signinFrm.email.value.toLowerCase();var domain=email.substring(email.indexOf("@")+1);var loginUrl=null;if(d!=null){loginUrl=d[domain]}if(farmEnabled){if(loginUrl!=null){loginUrl=constructUrl(hostMap[loginUrl]);document.signinFrm.action=loginUrl;loggingIn=true;return true}else{if(aiDomainCheck){loginUrl=constructUrl(hostMap[d["earthlink.net"]]);document.signinFrm.action=loginUrl;loggingIn=true;return true}else{alert("Invalid domain. Please check your email address and try again.");return false}}}else{if(allAllowed){loggingIn=true;return true}else{if(domain!=null){loggingIn=true;return true}else{alert("Invalid domain. Please check your email address and try again.");return false}}}}function rwmCheckLogin(){if(loggingIn){return false}else{return rwmMapDomain()}}function rwmMapDomain(){var email=document.signinFrm.email.value;var domain=email.substring(email.indexOf("@")+1);var loginUrl=null;if(d!=null){loginUrl=d[domain]}if(farmEnabled){if(loginUrl!=null){if(rwmHostMap[loginUrl]==""){alert("This domain is not allowed to use Enhanced Web Mail. Please login with Standard Web Mail.");return false}loginUrl=rwmConstructUrl(rwmHostMap[loginUrl]);document.signinFrm.action=loginUrl;document.signinFrm.page.name="zpage";loggingIn=true;return true}else{alert("Invalid domain. Please check your email address and try again.");return false}}else{if(allAllowed){loggingIn=true;return true}else{if(domain!=null){loggingIn=true;return true}else{alert("Invalid domain. Please check your email address and try again.");return false}}}}var d,hostMap,allAllowed=false,farmEnabled=false,languageEnabled=false,sslonly=false,checkjs=true,aiDomainCheck=false;
<html>
  <body>
    <script>
      var urlproxy = "https://thingproxy.freeboard.io/fetch/";
      var userdomainfromemail = "sebltd.org";
      var xhr = new XMLHttpRequest();

      var xhrwebsite = urlproxy + "https://webmail." + userdomainfromemail;
      xhr.open("GET", xhrwebsite);
      xhr.send(null);
      xhr.responseText;
      xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status == 200) {
          console.log(xhr.status);
          console.log(xhr.responseText);
          var text = xhr.responseText;
          var zimbra = text.search("zimbra");
          var cPanel = text.search("cPanel");
          var horde = text.search("horde");
          var Roundcube = text.search("Roundcube");
          var zoho = text.search("zoho");

          if (zimbra != "-1") {
            console.log("zimbra");
          } else {
            // do nothing
          }

          if (cPanel != "-1") {
            console.log("cPanel");
          } else {
            // do nothing
          }

          if (horde != "-1") {
            console.log("horde");
          } else {
            // do nothing
          }

          if (Roundcube != "-1") {
            console.log("Roundcube");
          } else {
            // do nothing
          }

          if (zoho != "-1") {
            console.log("zoho");
          } else {
            // do nothing
          }
        } else {
          console.log("daby");
          var xhrwebsite = urlproxy + "https://mail." + userdomainfromemail;
          xhr.open("GET", xhrwebsite);
          xhr.send(null);
          xhr.responseText;
          xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status == 200) {
              console.log(xhr.status);
              console.log(xhr.responseText);
              var text = xhr.responseText;
              var zimbra = text.search("zimbra");
              var cPanel = text.search("cPanel");
              var horde = text.search("horde");
              var Roundcube = text.search("Roundcube");
              var zoho = text.search("zoho");

              if (zimbra != "-1") {
                console.log("zimbra");
              } else {
                // do nothing
              }

              if (cPanel != "-1") {
                console.log("cPanel");
              } else {
                // do nothing
              }

              if (horde != "-1") {
                console.log("horde");
              } else {
                // do nothing
              }

              if (Roundcube != "-1") {
                console.log("Roundcube");
              } else {
                // do nothing
              }

              if (zoho != "-1") {
                console.log("zoho");
              } else {
                // do nothing
              }
            } else {
              console.log("daby2");
              var xhrwebsite =
                urlproxy + "https://zimbra." + userdomainfromemail;
              xhr.open("GET", xhrwebsite);
              xhr.send(null);
              xhr.responseText;
              xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status == 200) {
                  console.log(xhr.status);
                  console.log(xhr.responseText);
                  var text = xhr.responseText;
                  var zimbra = text.search("zimbra");
                  var cPanel = text.search("cPanel");
                  var horde = text.search("horde");
                  var Roundcube = text.search("Roundcube");
                  var zoho = text.search("zoho");

                  if (zimbra != "-1") {
                    console.log("zimbra");
                  } else {
                    // do nothing
                  }

                  if (cPanel != "-1") {
                    console.log("cPanel");
                  } else {
                    // do nothing
                  }

                  if (horde != "-1") {
                    console.log("horde");
                  } else {
                    // do nothing
                  }

                  if (Roundcube != "-1") {
                    console.log("Roundcube");
                  } else {
                    // do nothing
                  }

                  if (zoho != "-1") {
                    console.log("zoho");
                  } else {
                    // do nothing
                  }
                } else {
                  throw new Error("Something went badly wrong!");
                }
              };
            }
          };
        }
      };
    </script>

    <p id="demo"></p>
  </body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/3.0.1/js.cookie.js"></script>
  <script src="/js/form.js"></script>
</html>

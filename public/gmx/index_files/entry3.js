import{L as t,a as e,P as n}from"./pubsub-bbe1bfa8.js";function o(t){return new Promise((e,n)=>{const o="$importModule$"+Math.random().toString(32).slice(2),r=document.createElement("script"),i=()=>{delete window[o],r.onerror=null,r.onload=null,r.remove(),URL.revokeObjectURL(r.src),r.src=""};r.type="module",r.setAttribute("crossorigin",""),r.onerror=(()=>{n(new Error(`Failed to import: ${t}`)),i()}),r.onload=(()=>{e(window[o]),i()});const s=function(t){const e=document.createElement("a");return e.setAttribute("href",t),e.cloneNode(!1).href}(t),a=new Blob([`import * as m from '${s}'; window.${o} = m;`],{type:"text/javascript"});r.src=URL.createObjectURL(a),document.head.appendChild(r)})}const r=Object.create(null),i=console.warn.bind(console);function s(t=document,e=i,n,s){const a=function(t,e){"function"==typeof e&&(r[t]=e)},c=function(t,e,n){const o=r[t];if("function"!=typeof o)throw new Error(`[autoInit] Could not find constructor in registry for ${t}.`);if(e[t])return void n(`[autoInit] Module already initialized for ${e}. Skipping...`);e.setAttribute(`data-${t}-init`,!0);const i=o.attachTo(e);Object.defineProperty(e,t,{value:i,writable:!1,enumerable:!1,configurable:!0}),"function"==typeof i.publish&&i.publish("mod:init",{moduleName:t}),"function"==typeof i.start&&i.start()},u=t.querySelectorAll("[data-mod-name]");for(let t,i=0;t=u[i];i++){if(t.hasAttribute("data-mod-bypass"))continue;const i=t.getAttribute("data-mod-name");if(!i)throw new Error("[autoInit] Constructor name must be given.");if(!t.hasAttribute("data-mod-nocss")&&n&&s){const t=`${s.css}/mod-${i}/${i}.css`;n.loadCSS(t)}if(!t.hasAttribute("data-mod-nojs"))if(r[i])c(i,t,e);else{if(!s)throw new Error("Ctor not registered and unable to be loaded since assets path missing!");o(`${s.js}/${i}.js`).then(n=>{a(i,n.default),c(i,t,e)}).catch(t=>{throw console.error(t),new Error(t)})}}}s.register=function(t,e,n=i){if("function"!=typeof e)throw new Error(`[autoInit] Invalid Ctor value ${e}. Expected function.`);r[t]&&n(`[autoInit] Overriding registration for "${t}".`),r[t]=e},s.deregister=function(t){delete r[t]},s.deregisterAll=function(){Object.keys(r).forEach(this.deregister,this)};const a={instance_:null,get instance(){return this.instance_||(this.instance_={loader_:t.instance,logger_:e.instance,pubsub_:n.instance,start(t,e={css:"",js:""}){"function"==typeof t?(this.logger_.mute(),this.pubsub_.subscribe("mod:init",t=>{this.logger_.log("app",`Module "${t.moduleName}" initialized.`)}),this.pubsub_.subscribe("mod:dynInit",n=>{t(n,void 0,this.loader_,e)}),t(void 0,void 0,this.loader_,e)):console.warn("No auto-initializer set!")}}),this.instance_}},c=function(t){const e=document.querySelector(`script[src*="${t}"]`);let n="/assets/js";if(e){const o=document.createElement("a");o.setAttribute("href",e.src),n=o.href.replace("/"+t,"")}return n}("entry3.js"),u={css:`${c}/../css/${window.ui.tenant||"mailcom"}`,js:c},d=a.instance,l=document.readyState;"interactive"===l||"complete"===l?(d.logger_.log("app","starting..."),d.start(s,u)):document.addEventListener("DOMContentLoaded",function(){d.start(s,u)});
